{% extends "base.html" %}

{% block title %}{{ 'Edit' if item else 'Add' }} Reading Material - Reading Tracker{% endblock %}

{% block content %}
<div class="form-container">
    <h2>{{ 'Edit' if item else 'Add New' }} Reading Material</h2>

    <form method="post">
        <div class="form-group">
            <label for="title">Title *</label>
            <input type="text" id="title" name="title" value="{{ item.title if item else '' }}" required>
        </div>

        <div class="form-group">
            <label for="link">Link (URL)</label>
            <input type="url" id="link" name="link" value="{{ item.link if item and item.link else '' }}" placeholder="https://...">
        </div>

        <div class="form-group">
            <label for="status_id">Status</label>
            <select id="status_id" name="status_id">
                <option value="">-- Select Status --</option>
                {% for status in statuses %}
                    <option value="{{ status.id }}" {% if item and item.status_id == status.id %}selected{% endif %}>{{ status.display_name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="chapter_current">Current Chapter</label>
                <input type="number" id="chapter_current" name="chapter_current" value="{{ item.chapter_current if item else 0 }}" min="0">
            </div>

            <div class="form-group">
                <label for="chapter_total">Total Chapters</label>
                <input type="number" id="chapter_total" name="chapter_total" value="{{ item.chapter_total if item and item.chapter_total else '' }}" min="0" placeholder="Optional">
            </div>
        </div>

        <div class="form-group">
            <label for="tags">Tags (comma-separated)</label>
            <input type="text" id="tags" name="tags" value="{{ item.tags|map(attribute='name')|join(', ') if item else '' }}" placeholder="fiction, sci-fi, favorite">
        </div>

        <div class="form-group">
            <label for="notes">Notes</label>
            <textarea id="notes" name="notes" rows="4" placeholder="Your notes...">{{ item.notes if item and item.notes else '' }}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">{{ 'Update' if item else 'Add' }}</button>
            <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
